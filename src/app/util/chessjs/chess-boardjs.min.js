! function() {
    "use strict";
    var e = window.jQuery,
        r = "abcdefgh".split(""),
        n = "1.8.3",
        t = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",
        o = y(t),
        a = {};

    function i(e, r, n) {
        var t = 0,
            o = !1,
            a = [],
            i = function() {
                t = 0, o && (o = !1, s())
            },
            s = function() {
                t = window.setTimeout(i, r), e.apply(n, a)
            };
        return function(e) {
            a = arguments, t ? o = !0 : s()
        }
    }

    function s() {
        return "xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g, function(e) {
            return (16 * Math.random() | 0).toString(16)
        })
    }

    function p(e) {
        return JSON.parse(JSON.stringify(e))
    }

    function c(e) {
        var r = e.split(".");
        return {
            major: parseInt(r[0], 10),
            minor: parseInt(r[1], 10),
            patch: parseInt(r[2], 10)
        }
    }

    function u(e, r) {
        for (var n in r)
            if (r.hasOwnProperty(n))
                for (var t = "{" + n + "}", o = r[n]; - 1 !== e.indexOf(t);) e = e.replace(t, o);
        return e
    }

    function f(e) {
        return "string" == typeof e
    }

    function d(e) {
        return "function" == typeof e
    }

    function l(e) {
        return "number" == typeof e && isFinite(e) && Math.floor(e) === e
    }

    function h(e) {
        return "fast" === e || "slow" === e || !!l(e) && e >= 0
    }

    function v(e) {
        if (!f(e)) return !1;
        var r = e.split("-");
        return 2 === r.length && (g(r[0]) && g(r[1]))
    }

    function g(e) {
        return f(e) && -1 !== e.search(/^[a-h][1-8]$/)
    }

    function w(e) {
        return f(e) && -1 !== e.search(/^[bw][KQRNBP]$/)
    }

    function b(e) {
        if (!f(e)) return !1;
        var r = (e = function(e) {
            return e.replace(/8/g, "11111111").replace(/7/g, "1111111").replace(/6/g, "111111").replace(/5/g, "11111").replace(/4/g, "1111").replace(/3/g, "111").replace(/2/g, "11")
        }(e = e.replace(/ .+$/, ""))).split("/");
        if (8 !== r.length) return !1;
        for (var n = 0; n < 8; n++)
            if (8 !== r[n].length || -1 !== r[n].search(/[^kqrnbpKQRNBP1]/)) return !1;
        return !0
    }

    function m(r) {
        if (!e.isPlainObject(r)) return !1;
        for (var n in r)
            if (r.hasOwnProperty(n) && (!g(n) || !w(r[n]))) return !1;
        return !0
    }

    function P() {
        return typeof window.$ && e.fn && e.fn.jquery && (r = e.fn.jquery, t = n, r = c(r), t = c(t), 1e5 * r.major * 1e5 + 1e5 * r.minor + r.patch >= 1e5 * t.major * 1e5 + 1e5 * t.minor + t.patch);
        var r, t
    }

    function y(e) {
        if (!b(e)) return !1;
        for (var n, t = (e = e.replace(/ .+$/, "")).split("/"), o = {}, a = 8, i = 0; i < 8; i++) {
            for (var s = t[i].split(""), p = 0, c = 0; c < s.length; c++) {
                if (-1 !== s[c].search(/[1-8]/)) p += parseInt(s[c], 10);
                else o[r[p] + a] = (n = s[c]).toLowerCase() === n ? "b" + n.toUpperCase() : "w" + n.toUpperCase(), p += 1
            }
            a -= 1
        }
        return o
    }

    function x(e) {
        if (!m(e)) return !1;
        for (var n, t, o = "", a = 8, i = 0; i < 8; i++) {
            for (var s = 0; s < 8; s++) {
                var p = r[s] + a;
                e.hasOwnProperty(p) ? o += (n = e[p], t = void 0, "w" === (t = n.split(""))[0] ? t[1].toUpperCase() : t[1].toLowerCase()) : o += "1"
            }
            7 !== i && (o += "/"), a -= 1
        }
        return o = function(e) {
            return e.replace(/11111111/g, "8").replace(/1111111/g, "7").replace(/111111/g, "6").replace(/11111/g, "5").replace(/1111/g, "4").replace(/111/g, "3").replace(/11/g, "2")
        }(o)
    }

    function O(e, n) {
        var t = e.split(""),
            o = r.indexOf(t[0]) + 1,
            a = parseInt(t[1], 10),
            i = n.split(""),
            s = r.indexOf(i[0]) + 1,
            p = parseInt(i[1], 10),
            c = Math.abs(o - s),
            u = Math.abs(a - p);
        return c >= u ? c : u
    }

    function T(e, n, t) {
        for (var o = function(e) {
                for (var n = [], t = 0; t < 8; t++)
                    for (var o = 0; o < 8; o++) {
                        var a = r[t] + (o + 1);
                        e !== a && n.push({
                            square: a,
                            distance: O(e, a)
                        })
                    }
                n.sort(function(e, r) {
                    return e.distance - r.distance
                });
                var i = [];
                for (t = 0; t < n.length; t++) i.push(n[t].square);
                return i
            }(t), a = 0; a < o.length; a++) {
            var i = o[a];
            if (e.hasOwnProperty(i) && e[i] === n) return i
        }
        return !1
    }

    function S(e, r) {
        var n = p(e);
        for (var t in r)
            if (r.hasOwnProperty(t) && n.hasOwnProperty(t)) {
                var o = n[t];
                delete n[t], n[r[t]] = o
            } return n
    }

    function q(e) {
        var r;
        return "black" !== e.orientation && (e.orientation = "white"), !1 !== e.showNotation && (e.showNotation = !0), !0 !== e.draggable && (e.draggable = !1), "trash" !== e.dropOffBoard && (e.dropOffBoard = "snapback"), !0 !== e.sparePieces && (e.sparePieces = !1), e.sparePieces && (e.draggable = !0), e.hasOwnProperty("pieceTheme") && (f(e.pieceTheme) || d(e.pieceTheme)) || (e.pieceTheme = "img/chesspieces/wikipedia/{piece}.png"), h(e.appearSpeed) || (e.appearSpeed = 200), h(e.moveSpeed) || (e.moveSpeed = 200), h(e.snapbackSpeed) || (e.snapbackSpeed = 60), h(e.snapSpeed) || (e.snapSpeed = 30), h(e.trashSpeed) || (e.trashSpeed = 100), l(r = e.dragThrottleRate) && r >= 1 || (e.dragThrottleRate = 20), e
    }
    a.alpha = "alpha-d2270", a.black = "black-3c85d", a.board = "board-b72b1", a.chessboard = "chessboard-63f37", a.clearfix = "clearfix-7da63", a.highlight1 = "highlight1-32417", a.highlight2 = "highlight2-9c5d2", a.notation = "notation-322f9", a.numeric = "numeric-fc462", a.piece = "piece-417db", a.row = "row-5277c", a.sparePieces = "spare-pieces-7492f", a.sparePiecesBottom = "spare-pieces-bottom-ae20f", a.sparePiecesTop = "spare-pieces-top-4028b", a.square = "square-55d63", a.white = "white-1e1d7", window.Chessboard = function(n, t) {
        if (! function() {
                if (!P()) return window.alert("Chessboard Error 1005: Unable to find a valid version of jQuery. Please include jQuery 1.8.3 or higher on the page\n\nExiting\u2026"), !1;
                return !0
            }()) return null;
        var c = function(r) {
            if ("" === r) return window.alert("Chessboard Error 1001: The first argument to Chessboard() cannot be an empty string.\n\nExiting\u2026"), !1;
            f(r) && "#" !== r.charAt(0) && (r = "#" + r);
            var n = e(r);
            if (1 !== n.length) {
                var t = "Chessboard Error 1003: (" + r + ")The first argument to Chessboard() must be the ID of a DOM node, an ID query selector, or a single DOM node.\n\nExiting\u2026";
                return console.error(t), !1
            }
            return n
        }(n);
        if (!c) return null;
        t = q(t = function(r) {
            return "start" === r ? r = {
                position: p(o)
            } : b(r) ? r = {
                position: y(r)
            } : m(r) && (r = {
                position: p(r)
            }), e.isPlainObject(r) || (r = {}), r
        }(t));
        var l = null,
            h = null,
            w = null,
            O = null,
            k = {},
            E = 2,
            C = "white",
            B = {},
            I = null,
            M = null,
            N = null,
            j = !1,
            D = {},
            R = {},
            Q = {},
            X = 16,
            Y = null;

        function K(e, r, n) {
            if (!0 === t.hasOwnProperty("showErrors") && !1 !== t.showErrors) {
                var o = "Chessboard Error " + e + ": " + r;
                return "console" === t.showErrors && "object" == typeof console && "function" == typeof console.log ? (console.log(o), void(arguments.length >= 2 && console.log(n))) : "alert" === t.showErrors ? (n && (o += "\n\n" + JSON.stringify(n)), void window.alert(o)) : void(d(t.showErrors) && t.showErrors(e, r, n))
            }
        }

        function L(e) {
            return d(t.pieceTheme) ? t.pieceTheme(e) : f(t.pieceTheme) ? u(t.pieceTheme, {
                piece: e
            }) : (K(8272, "Unable to build image source for config.pieceTheme."), "")
        }

        function U(e, r, n) {
            var t = '<img src="' + L(e) + '" ';
            return f(n) && "" !== n && (t += 'id="' + n + '" '), t += 'alt="" class="{piece}" data-piece="' + e + '" style="width:' + X + "px;height:" + X + "px;", r && (t += "display:none;"), u(t += '" />', a)
        }

        function $(e) {
            var r = ["wK", "wQ", "wR", "wB", "wN", "wP"];
            "black" === e && (r = ["bK", "bQ", "bR", "bB", "bN", "bP"]);
            for (var n = "", t = 0; t < r.length; t++) n += U(r[t], !1, D[r[t]]);
            return n
        }

        function F(r, n, o, i) {
            var p = e("#" + R[r]),
                c = p.offset(),
                u = e("#" + R[n]),
                f = u.offset(),
                l = s();
            e("body").append(U(o, !0, l));
            var h = e("#" + l);
            h.css({
                display: "",
                position: "absolute",
                top: c.top,
                left: c.left
            }), p.find("." + a.piece).remove();
            var v = {
                duration: t.moveSpeed,
                complete: function() {
                    u.append(U(o)), h.remove(), d(i) && i()
                }
            };
            h.animate(f, v)
        }

        function J(r, n, o) {
            var i = e("#" + D[r]).offset(),
                p = e("#" + R[n]),
                c = p.offset(),
                u = s();
            e("body").append(U(r, !0, u));
            var f = e("#" + u);
            f.css({
                display: "",
                position: "absolute",
                left: i.left,
                top: i.top
            });
            var l = {
                duration: t.moveSpeed,
                complete: function() {
                    p.find("." + a.piece).remove(), p.append(U(r)), f.remove(), d(o) && o()
                }
            };
            f.animate(c, l)
        }

        function z(r, n, o) {
            if (0 !== r.length)
                for (var i = 0, s = 0; s < r.length; s++) {
                    var c = r[s];
                    "clear" === c.type ? e("#" + R[c.square] + " ." + a.piece).fadeOut(t.trashSpeed, u) : "add" !== c.type || t.sparePieces ? "add" === c.type && t.sparePieces ? J(c.piece, c.square, u) : "move" === c.type && F(c.source, c.destination, c.piece, u) : e("#" + R[c.square]).append(U(c.piece, !0)).find("." + a.piece).fadeIn(t.appearSpeed, u)
                }

            function u() {
                (i += 1) === r.length && (W(), d(t.onMoveEnd) && t.onMoveEnd(p(n), p(o)))
            }
        }

        function A(e, r) {
            e = p(e), r = p(r);
            var n = [],
                t = {};
            for (var o in r) r.hasOwnProperty(o) && e.hasOwnProperty(o) && e[o] === r[o] && (delete e[o], delete r[o]);
            for (o in r)
                if (r.hasOwnProperty(o)) {
                    var a = T(e, r[o], o);
                    a && (n.push({
                        type: "move",
                        source: a,
                        destination: o,
                        piece: r[o]
                    }), delete e[a], delete r[o], t[o] = !0)
                } for (o in r) r.hasOwnProperty(o) && (n.push({
                type: "add",
                square: o,
                piece: r[o]
            }), delete r[o]);
            for (o in e) e.hasOwnProperty(o) && (t.hasOwnProperty(o) || (n.push({
                type: "clear",
                square: o,
                piece: e[o]
            }), delete e[o]));
            return n
        }

        function W() {
            for (var r in l.find("." + a.piece).remove(), B) B.hasOwnProperty(r) && e("#" + R[r]).append(U(B[r]))
        }

        function G() {
            l.html(function(e) {
                "black" !== e && (e = "white");
                var n = "",
                    o = p(r),
                    i = 8;
                "black" === e && (o.reverse(), i = 1);
                for (var s = "white", c = 0; c < 8; c++) {
                    n += '<div class="{row}">';
                    for (var f = 0; f < 8; f++) {
                        var d = o[f] + i;
                        n += '<div class="{square} ' + a[s] + " square-" + d + '" style="width:' + X + "px;height:" + X + 'px;" id="' + R[d] + '" data-square="' + d + '">', t.showNotation && (("white" === e && 1 === i || "black" === e && 8 === i) && (n += '<div class="{notation} {alpha}">' + o[f] + "</div>"), 0 === f && (n += '<div class="{notation} {numeric}">' + i + "</div>")), n += "</div>", s = "white" === s ? "black" : "white"
                    }
                    n += '<div class="{clearfix}"></div></div>', s = "white" === s ? "black" : "white", "white" === e ? i -= 1 : i += 1
                }
                return u(n, a)
            }(C, t.showNotation)), W(), t.sparePieces && ("white" === C ? (w.html($("black")), O.html($("white"))) : (w.html($("white")), O.html($("black"))))
        }

        function H(e) {
            var r = p(B),
                n = p(e);
            x(r) !== x(n) && (d(t.onChange) && t.onChange(r, n), B = e)
        }

        function V(e, r) {
            for (var n in Q)
                if (Q.hasOwnProperty(n)) {
                    var t = Q[n];
                    if (e >= t.left && e < t.left + X && r >= t.top && r < t.top + X) return n
                } return "offboard"
        }

        function Z() {
            l.find("." + a.square).removeClass(a.highlight1 + " " + a.highlight2)
        }

        function _() {
            Z();
            var e = p(B);
            delete e[N], H(e), W(), h.fadeOut(t.trashSpeed), j = !1
        }

        function ee(r, n, o, i) {
            d(t.onDragStart) && !1 === t.onDragStart(r, n, p(B), C) || (j = !0, I = n, N = r, M = "spare" === r ? "offboard" : r, function() {
                for (var r in Q = {}, R) R.hasOwnProperty(r) && (Q[r] = e("#" + R[r]).offset())
            }(), h.attr("src", L(n)).css({
                display: "",
                position: "absolute",
                left: o - X / 2,
                top: i - X / 2
            }), "spare" !== r && e("#" + R[r]).addClass(a.highlight1).find("." + a.piece).css("display", "none"))
        }

        function re(r, n) {
            h.css({
                left: r - X / 2,
                top: n - X / 2
            });
            var o = V(r, n);
            o !== M && (g(M) && e("#" + R[M]).removeClass(a.highlight2), g(o) && e("#" + R[o]).addClass(a.highlight2), d(t.onDragMove) && t.onDragMove(o, M, N, I, p(B), C), M = o)
        }

        function ne(r) {
            var n = "drop";
            if ("offboard" === r && "snapback" === t.dropOffBoard && (n = "snapback"), "offboard" === r && "trash" === t.dropOffBoard && (n = "trash"), Y && 0 != Y.trim().length || (Y = r, d(t.onFirstTap) && t.onFirstTap(Y)), d(t.onDrop)) {
                var o = p(B);
                "spare" === N && g(r) && (o[r] = I), g(N) && "offboard" === r && delete o[N], g(N) && g(r) && (delete o[N], o[r] = I);
                var a = p(B),
                    i = t.onDrop(N, r, I, o, a, C);
                "snapback" !== i && "trash" !== i || (n = i)
            }
            "snapback" === n ? function() {
                if ("spare" !== N) {
                    Z();
                    var r = e("#" + R[N]).offset(),
                        n = {
                            duration: t.snapbackSpeed,
                            complete: function() {
                                W(), h.css("display", "none"), d(t.onSnapbackEnd) && t.onSnapbackEnd(I, N, p(B), C)
                            }
                        };
                    h.animate(r, n), j = !1
                } else _()
            }() : "trash" === n ? _() : "drop" === n && function(r) {
                Z();
                var n = p(B);
                delete n[N], n[r] = I, H(n);
                var o = e("#" + R[r]).offset(),
                    a = {
                        duration: t.snapSpeed,
                        complete: function() {
                            W(), h.css("display", "none"), d(t.onSnapEnd) && t.onSnapEnd(N, r, I)
                        }
                    };
                h.animate(o, a), j = !1
            }(r)
        }

        function te(e) {
            e.preventDefault()
        }

        function oe(r) {
            if (t.draggable && 2 != r.button) {
                var n = e(this).attr("data-square");
                if (g(n))
                    if (B.hasOwnProperty(n)) ee(n, B[n], r.pageX, r.pageY);
                    else if (t.enableDoubleTap)
                    if (Y && Y.trim().length > 0) {
                        if (d(t.onSecondTap)) {
                            var o = Y;
                            Y = null, t.onSecondTap(o, n)
                        }
                    } else Y = n
            }
        }

        function ae(r) {
            if (t.draggable) {
                var n = e(this).attr("data-square");
                g(n) && B.hasOwnProperty(n) && (r = r.originalEvent, ee(n, B[n], r.changedTouches[0].pageX, r.changedTouches[0].pageY))
            }
        }

        function ie(r) {
            t.sparePieces && ee("spare", e(this).attr("data-piece"), r.pageX, r.pageY)
        }

        function se(r) {
            t.sparePieces && ee("spare", e(this).attr("data-piece"), (r = r.originalEvent).changedTouches[0].pageX, r.changedTouches[0].pageY)
        }
        k.clear = function(e) {
            k.position({}, e)
        }, k.destroy = function() {
            c.html(""), h.remove(), c.unbind()
        }, k.fen = function() {
            return k.position("fen")
        }, k.flip = function() {
            return k.orientation("flip")
        }, k.move = function() {
            if (0 !== arguments.length) {
                for (var e = !0, r = {}, n = 0; n < arguments.length; n++)
                    if (!1 !== arguments[n])
                        if (v(arguments[n])) {
                            var t = arguments[n].split("-");
                            r[t[0]] = t[1]
                        } else K(2826, "Invalid move passed to the move method.", arguments[n]);
                else e = !1;
                var o = S(B, r);
                return k.position(o, e), o
            }
        }, k.orientation = function(e) {
            return 0 === arguments.length ? C : "white" === e || "black" === e ? (C = e, G(), C) : "flip" === e ? (C = "white" === C ? "black" : "white", G(), C) : void K(5482, "Invalid value passed to the orientation method.", e)
        }, k.position = function(e, r) {
            if (0 === arguments.length) return p(B);
            if (f(e) && "fen" === e.toLowerCase()) return x(B);
            if (f(e) && "start" === e.toLowerCase() && (e = p(o)), b(e) && (e = y(e)), m(e))
                if (!1 !== r && (r = !0), r) {
                    var n = A(B, e);
                    z(n, B, e), H(e)
                } else H(e), W();
            else K(6482, "Invalid value passed to the position method.", e)
        }, k.resize = function() {
            X = function() {
                var e = parseInt(c.width(), 10);
                if (!e || e <= 0) return 0;
                for (var r = e - 1; r % 8 != 0 && r > 0;) r -= 1;
                return r / 8
            }(), l.css("width", 8 * X + "px"), h.css({
                height: X,
                width: X
            }), t.sparePieces && c.find("." + a.sparePieces).css("paddingLeft", X + E + "px"), G()
        }, k.start = function(e) {
            k.position("start", e)
        };
        var pe = i(function(e) {
                j && re(e.pageX, e.pageY)
            }, t.dragThrottleRate),
            ce = i(function(e) {
                j && re(e.originalEvent.changedTouches[0].pageX, e.originalEvent.changedTouches[0].pageY)
            }, t.dragThrottleRate);

        function ue(e) {
            j && ne(V(e.pageX, e.pageY))
        }

        function fe(e) {
            j && ne(V(e.originalEvent.changedTouches[0].pageX, e.originalEvent.changedTouches[0].pageY))
        }

        function de(r) {
            if (!j && d(t.onMouseoverSquare)) {
                var n = e(r.currentTarget).attr("data-square");
                if (g(n)) {
                    var o = !1;
                    B.hasOwnProperty(n) && (o = B[n]), t.onMouseoverSquare(n, o, p(B), C)
                }
            }
        }

        function le(r) {
            if (!j && d(t.onMouseoutSquare)) {
                var n = e(r.currentTarget).attr("data-square");
                if (g(n)) {
                    var o = !1;
                    B.hasOwnProperty(n) && (o = B[n]), t.onMouseoutSquare(n, o, p(B), C)
                }
            }
        }
        return C = t.orientation, t.hasOwnProperty("position") && ("start" === t.position ? B = p(o) : b(t.position) ? B = y(t.position) : m(t.position) ? B = p(t.position) : K(7263, "Invalid value passed to config.position.", t.position)),
            function() {
                var n, o;
                ! function() {
                    for (var e = 0; e < r.length; e++)
                        for (var n = 1; n <= 8; n++) {
                            var t = r[e] + n;
                            R[t] = t + "-" + s()
                        }
                    var o = "KQRNBP".split("");
                    for (e = 0; e < o.length; e++) {
                        var a = "w" + o[e],
                            i = "b" + o[e];
                        D[a] = a + "-" + s(), D[i] = i + "-" + s()
                    }
                }(), c.html((n = t.sparePieces, o = '<div class="{chessboard}">', n && (o += '<div class="{sparePieces} {sparePiecesTop}"></div>'), o += '<div class="{board}"></div>', n && (o += '<div class="{sparePieces} {sparePiecesBottom}"></div>'), u(o += "</div>", a))), l = c.find("." + a.board), t.sparePieces && (w = c.find("." + a.sparePiecesTop), O = c.find("." + a.sparePiecesBottom));
                var i = s();
                e("body").append(U("wP", !0, i)), h = e("#" + i), E = parseInt(l.css("borderLeftWidth"), 10), k.resize()
            }(),
            function() {
                e("body").on("mousedown mousemove", "." + a.piece, te), l.on("mousedown", "." + a.square, oe), c.on("mousedown", "." + a.sparePieces + " ." + a.piece, ie), l.on("mouseenter", "." + a.square, de).on("mouseleave", "." + a.square, le);
                var r = e(window);
                r.on("mousemove", pe).on("mouseup", ue), "ontouchstart" in document.documentElement && (l.on("touchstart", "." + a.square, ae), c.on("touchstart", "." + a.sparePieces + " ." + a.piece, se), r.on("touchmove", ce).on("touchend", fe))
            }(), k
    }, window.ChessBoard = window.Chessboard, window.Chessboard.fenToObj = y, window.Chessboard.objToFen = x
}();